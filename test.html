    <!DOCTYPE html>
    <html>
    <head>
        <title>公益大探索</title>
        <meta charset=UTF-8">
        <link rel="stylesheet" href="index.css">
        <script src="js/three.min.js"></script>
        <script src="OrbitControls.js"></script>
	    <script src="FontLoader.js"></script>
	    <script src="TextGeometry.js"></script>
        <script>
            window.addEventListener('DOMContentLoaded', main);
            function main(){
                const canvas = document.querySelector('#canvas');
                const renderer = new THREE.WebGLRenderer({antialias: true, canvas});
                width = document.getElementById('main_canvas').getBoundingClientRect().width;
        	height = document.getElementById('main_canvas').getBoundingClientRect().height;
        	renderer.setPixelRatio(1);
        	renderer.setSize(width, height);
                const fov = 75;
                const aspect = 2;
                const near = 0.1;
                const far = 5;
                const camera = new THREE.PerspectiveCamera(fov, aspect, near, far);
                camera.position.set(0, 3, 3);
                controls = new THREE.OrbitControls(camera,renderer.domElement);
		controls.update();
	            

                const scene = new THREE.Scene();
		scene.background = new THREE.Color( 0x87B8C0 );
                const boxWidth = 1;
                const boxHeight = 1;
                const boxDepth = 1;
                const geometry = new THREE.BoxGeometry(boxWidth, boxHeight, boxDepth);
                //const material = new THREE.MeshBasicMaterial({color: 0xaa4488});
                const material = new THREE.MeshPhongMaterial({color: 0xaa4488});
                const cube = new THREE.Mesh(geometry, material);
		    cube.position.set(1, 1, -2);
                cube.name='cube1';

                scene.add(cube);

                const color = 0xffffff;
                const intensity = 3;
                const light = new THREE.DirectionalLight(color, intensity);
                light.position.set(-1, 2, 4);
                scene.add(light);
		const amb = new THREE.AmbientLight(0xf8f8ff, 0.7);
		scene.add(amb);

                let mouse;
                let raycaster;
                let clickFlg = false;
                let moveFlg = false;
		    mouse = new THREE.Vector2();
                    raycaster = new THREE.Raycaster();
                function setControll(){
                    
                    canvas.addEventListener('pointermove',handleMouseMove);
                    canvas.addEventListener('click',handleClick);
                    function handleMouseMove(event){
                        moveFlg = true;
                        const element = event.currentTarget;
                        const x = event.clientX - element.offsetLeft;
                        const y = event.clientY - element.offsetTop;
                        const w = element.offsetWidth;
                        const h = element.offsetHeight;
                        mouse.x = (x/w)*2-1;
                        mouse.y = -(y/h)*2+1;
                    }
                    function handleClick(event){
                        if(clickFlg){
                        const loader = new THREE.FontLoader();

loader.load( 'gentilis_bold.typeface.json', function ( font ) {

	const geo = new THREE.TextGeometry( 'Hello three.js!', {
		font: font,
		size: 80,
		height: 5,
		curveSegments: 12,
		bevelEnabled: true,
		bevelThickness: 10,
		bevelSize: 8,
		bevelOffset: 0,
		bevelSegments: 5
	} );
	const material = new THREE.MeshPhongMaterial({color: 0x674488});
				const mess = new THREE.Mesh(geo, material);
		mess.position.set(1, 1, -1);
				scene.add(mess);
				mess.name='mess';
} );
				
				 
				clickFlg=false;
                         }else{
                            clickFlg = false;
                        }
                    }
                    raycaster.setFromCamera(mouse,camera);
                    const intersects = raycaster.intersectObjects(scene.children,false);
                    if(intersects.length > 0){
                        const obj = intersects[0].object;
                        if(obj.name == 'cube1'){
                           if(moveFlg){
                            clickFlg = true;
                            }
                             }else{
                                clickFlg = false;
                                }
                        }else{
                            clickFlg = false;
		    }
			if(clickFlg){
    			canvas.style.cursor = 'pointer';
   			 }else{
    			canvas.style.cursor = 'grab';
			    }		

                }
                renderer.render(scene, camera);
                function render(time){
                    time *= 0.001;
                    cube.rotation.x = time;
                    cube.rotation.y = time;
                    controls.update();
                    renderer.render(scene, camera);
                    setControll();
                    requestAnimationFrame(render);
                }
               requestAnimationFrame(render);
            }
                
        </script>
    </head>
    <body>
    <div id="main_canvas">
        <canvas id="canvas" width="100%" height="100%"></canvas>
    </div>
    </body>
    </html>
